<!DOCTYPE html>
<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"><meta charset="UTF-8"></head><body><script>!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=3)}([function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function a(e){try{i(n.next(e))}catch(e){s(e)}}function u(e){try{i(n.throw(e))}catch(e){s(e)}}function i(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,u)}i((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=r(1);t.default=class{constructor(e){this.loadStatus=e}handleEvent(e){return n(this,void 0,void 0,(function*(){!0===e.data.isPingCheck?this.handlePingStatusEvent(e):yield this.handleFetchEvent(e)}))}handlePingStatusEvent(e){const t={status:this.loadStatus};e.ports[0]?e.ports[0].postMessage(t):console.warn("Event does not contain a MessageChannel port, therefore unable to call postMessage with pingStatusResponse: "+this.loadStatus)}handleFetchEvent(e){return n(this,void 0,void 0,(function*(){if(200!==this.loadStatus)return this.respondFetchToPage(e,{status:this.loadStatus,errorType:o.ErrorType.FAILED_CSP});let t;try{t=this.buildRequest(e.data)}catch(t){return this.respondFetchToPage(e,{error:{name:t.name,message:t.message},errorType:o.ErrorType.INVALID_REQUEST})}try{const r=yield fetch(t),n=yield this.buildResponse(r);return this.respondFetchToPage(e,n)}catch(t){return this.respondFetchToPage(e,{error:{name:t.name,message:t.message},errorType:o.ErrorType.FAILED_FETCH})}}))}buildRequest(e){const{endpoint:t,requestInit:r}=e;if(!t||!r)throw new Error("Missing endpoint or requestInit from event");return new Request(t,Object.assign({},r))}buildResponse(e){return n(this,void 0,void 0,(function*(){const t={};e.headers.forEach((e,r)=>{t[r]=e});return{responseInit:{headers:t,status:e.status,statusText:e.statusText},responseArrayBuffer:yield e.arrayBuffer(),errorType:null}}))}respondFetchToPage(e,t){e.ports[0]?null===t.errorType?e.ports[0].postMessage(t,[t.responseArrayBuffer]):e.ports[0].postMessage(t):console.warn("Event does not contain a MessageChannel port, therefore unable to call postMessage with errorType: "+t.errorType)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorType=void 0,function(e){e.FAILED_FETCH="FAILED_FETCH",e.INVALID_REQUEST="INVALID_REQUEST",e.FAILED_CSP="FAILED_CSP"}(t.ErrorType||(t.ErrorType={}))},,function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.eventHandler=void 0;const o=n(r(0));t.eventHandler=new o.default(200),self.onmessage=e=>{t.eventHandler.handleEvent(e)}}]);
//# sourceMappingURL=200-iFrame.js.map</script></body></html>